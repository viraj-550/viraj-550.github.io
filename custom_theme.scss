@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap');

/*-- scss:rules --*/

body { 
  font-family: 'Inter', sans-serif; 
  font-size: 1.1rem; // Increase base font size for better readability
  line-height: 1.6; // Better line spacing
}

.code-block { font-family: 'Roboto Mono', monospace; }
.nav-link.active { 
    background-color: #e0f2fe; 
    color: #0c4a6e; 
    font-weight: 600;
    opacity: 0.5;
}

.nav-link:not(.active):hover { 
    background-color: #f1f5f9; 
    opacity: 0.5;
}

.nav-link {
  color: $body-color; // Use the standard dark text color
  border-radius: 4px;
  transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

// Style for hovering over an INACTIVE link in the sidebar
.nav-link:not(.active):hover {
  background-color: #e0f2fe; // A light, solid blue background
  color: #0c4a6e; // A very dark blue for maximum contrast
}

// Style for the CURRENTLY ACTIVE page link in the sidebar
.nav-link.active {
  background-color: $primary; // Solid primary blue background
  color: white;               // White text for maximum contrast
  font-weight: 500;
}


// Make sidebar styles specific to the main sidebar (#quarto-sidebar)

// *** Make sidebar styles specific to the main sidebar (#quarto-sidebar) ***

// Default state for a link inside the main sidebar
#quarto-sidebar .nav-link {
  color: $body-color;
  border-radius: 4px;
  transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

// Style for hovering over an INACTIVE link in the main sidebar
#quarto-sidebar .nav-link:not(.active):hover {
  background-color: #e0f2fe;
  color: #0c4a6e;
}

// Style for the CURRENTLY ACTIVE page link in the main sidebar
#quarto-sidebar .nav-link.active {
  background-color: $primary;
  color: white;
  font-weight: 500;
}

// *** NEW: Fix for the floating Table of Contents active item readability ***
.toc-floating .nav-link.active {
    color: white !important; // Force text to be white on the blue background
}


// Hover effect for the custom tab buttons from the guide
.tab-button:not(.active):hover {
    background-color: #e2e8f0;
}


// Hover effect for the custom tab buttons from the guide
.tab-button:not(.active):hover {
    background-color: #e2e8f0;
}

.content-section { display: none; }
.content-section.active { display: block; }
.tab-button.active { background-color: #0369a1; color: white; }
.code-pane { display: none; }
.code-pane.active { display: block; }

/* Base Table Styles */
.table-preview { width: 100%; margin-bottom: 1rem; border-collapse: collapse; font-size: 0.9em; }
.table-preview th, .table-preview td { padding: 0.75rem; text-align: left; vertical-align: top; border-bottom: 1px solid #e5e7eb; }
.table-preview thead th { background-color: #f9fafb; border-bottom: 2px solid #e5e7eb; font-weight: 600; }
.table-preview tbody tr:hover { background-color: #f3f4f6; }

/* Booktabs Style Table */
.table-booktabs { border-collapse: collapse; width: 100%; font-size: 0.9em; }
.table-booktabs th, .table-booktabs td { padding: 0.75rem; text-align: left; border: 0; }
.table-booktabs thead th { border-bottom: 2px solid #334155; }
.table-booktabs tbody { border-bottom: 2px solid #334155; }
.table-booktabs tbody tr { border-bottom: 1px solid #e2e8f0; }
.table-booktabs tbody tr:last-child { border-bottom: 0; }

/* Regression Table Specifics */
.table-regression td:nth-child(n+2) { text-align: center; }
.table-regression .stat { color: #64748b; font-size: 0.85em; }
.table-regression .sig-1 { font-weight: bold; }
.table-regression .sig-2 { font-weight: bold; }
.table-regression .sig-3 { font-weight: bold; }

/* Highlighting Styles */
.table-preview .highlight-row { background-color: #fef9c3 !important; }
.table-preview .highlight-cell { background-color: #dbeafe; font-weight: bold; }

.callout-preview { padding: 1.25em; margin: 1em 0; background-color: #f8f9fa; border-radius: 4px; border-left-width: 5px; border-left-style: solid; }
.callout-preview.note { border-left-color: #3b82f6; }
.callout-preview.warning { border-left-color: #f97316; }
.callout-preview.important { border-left-color: #ef4444; }

.figure-preview { margin: 1em 0; text-align: center; padding: 1em; border: 1px solid #e5e7eb; border-radius: 4px; background-color: #fcfcfc; }
.figure-preview img { max-width: 100%; height: auto; border-radius: 4px; }
.figure-preview figcaption { color: #6b7280; font-style: italic; font-size: 0.9em; margin-top: 0.75em; line-height: 1.4; }


// --- Custom Homepage Layout (Replaces Trestles) ---

// Hero Section - About Me
.hero-section {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  padding: 4rem 0;
  margin-bottom: 0;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
  width: 100%; // Ensure full width usage
}

.hero-content {
  display: flex;
  align-items: center;
  gap: 3rem;
  max-width: 1000px;
  margin: 0 auto;
}

.hero-image {
  flex: 0 0 300px;
}

.profile-img {
  width: 300px;
  height: 360px;
  border-radius: 12px;
  object-fit: cover;
  border: 4px solid white;
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.hero-text {
  flex: 1;
  
  h1 {
    font-size: 2.5rem;
    font-weight: 700;
    color: #2c3e50;
    margin-bottom: 1.5rem;
  }
  
  p {
    font-size: 1.2rem;
    line-height: 1.6;
    color: #495057;
    margin-bottom: 2rem;
  }
}

.hero-links {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    text-decoration: none;
    font-size: 0.85rem;
    padding: 0.4rem 0.8rem;
  }
}

// Research Section - Full Width
.research-section {
  background: white;
  padding: 5rem 0;
  width: 100%;
  
  .container {
    max-width: 1400px; // Larger container for research section
    margin: 0 auto;
    padding: 0 2rem;
    width: 100%;
  }
  
  h2 {
    font-size: 2.5rem;
    font-weight: 600;
    color: #2c3e50;
    text-align: center;
    margin-bottom: 4rem;
  }
}

// Research Cards - Full Width Container
.research-list {
  margin-top: 0;
  width: 100%;
}

// Ensure the listing container uses full width
#listing-research-posts {
  width: 100% !important;
  max-width: none !important;
}

#listing-research-posts .quarto-post {
  display: flex;
  align-items: flex-start;
  gap: 2.5rem;
  margin-bottom: 4rem;
  padding: 2.5rem;
  background: #fafafa;
  border-radius: 16px;
  border: 1px solid #e9ecef;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
  width: 100%; // Ensure full width
  max-width: 100%; // Don't constrain width
  // Remove fixed height - let it adapt to content
  
  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 35px rgba(0,0,0,0.15);
  }
}

#listing-research-posts .quarto-post .thumbnail {
  flex: 0 0 50%; // Take up exactly 50% of horizontal space
  max-width: 50%;
  
  img {
    width: 100%; // Use full width of the 50% container
    height: auto; // Let height adapt to image aspect ratio
    min-height: 300px; // Minimum height for consistency
    max-height: 400px; // Maximum height to prevent too tall images
    object-fit: cover;
    border-radius: 12px;
    border: 1px solid #dee2e6;
    transition: transform 0.3s ease;
    
    &:hover {
      transform: scale(1.03);
    }
  }
}

#listing-research-posts .quarto-post .body {
  flex: 1; // Take up remaining 50% space
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  // Remove fixed height - let it adapt to image height
  padding-left: 1rem; // Add some spacing from image
  
  .listing-title {
    font-size: 1.8rem; // Slightly larger for better visibility
    font-weight: 600;
    line-height: 1.3;
    margin-bottom: 1rem;
    margin-top: 0;
    
    a {
      color: #2c3e50;
      text-decoration: none;
      transition: color 0.2s ease;
      
      &:hover {
        color: #0d6efd;
      }
    }
  }
  
  .listing-date {
    font-size: 0.95rem;
    color: #6c757d;
    margin-bottom: 1.5rem;
    
    &::before {
      content: "ðŸ“…";
      margin-right: 0.5rem;
    }
  }
  
  .listing-description {
    font-size: 1.15rem; // Slightly larger for better readability
    line-height: 1.6;
    color: #495057;
    margin-bottom: auto;
    flex-grow: 1;
  }
}

// Research Links - Enhanced (One Line, Small)
.listing-links {
  display: flex !important;
  flex-wrap: nowrap; // Keep all links in one line
  gap: 0.35rem; // Smaller gap between buttons
  margin-top: 1.5rem;
  padding-top: 1rem;
  border-top: 1px solid #e9ecef;
  overflow-x: auto; // Allow horizontal scrolling if needed
  
  .btn {
    font-size: 0.7rem; // Very small font
    padding: 0.25rem 0.5rem; // Much smaller padding
    border-radius: 4px; // Smaller border radius
    text-decoration: none;
    transition: all 0.2s ease;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    gap: 0.25rem; // Smaller gap for icons
    white-space: nowrap; // Prevent text wrapping
    flex-shrink: 0; // Don't shrink buttons
    min-height: 24px; // Smaller minimum height
    line-height: 1;
    
    &:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    
    // Icon spacing (if using Bootstrap icons)
    i {
      font-size: 0.7rem;
    }
  }
}

// Research Abstract Styling
.research-abstract {
  margin-top: 1rem !important;
  padding: 1rem;
  background-color: #f8f9fa;
  border-radius: 8px;
  border-left: 4px solid #0d6efd;
  
  h4 {
    font-size: 1rem;
    font-weight: 600;
    color: #2c3e50;
    margin-bottom: 0.5rem;
    margin-top: 0;
  }
  
  p {
    font-size: 0.95rem;
    line-height: 1.5;
    color: #495057;
    margin-bottom: 0;
  }
}

// Responsive Design - Enhanced
@media (max-width: 768px) {
  .hero-content {
    flex-direction: column;
    text-align: center;
    gap: 2rem;
  }
  
  .hero-image {
    flex: none;
  }
  
  .profile-img {
    width: 200px;
    height: 240px;
  }
  
  .hero-text h1 {
    font-size: 2rem;
  }
  
  .research-section {
    padding: 3rem 0; // Reduced padding on mobile
    
    h2 {
      font-size: 2rem; // Smaller heading on mobile
      margin-bottom: 3rem;
    }
  }
  
  #listing-research-posts .quarto-post {
    flex-direction: column;
    text-align: center;
    padding: 2rem 1.5rem; // Adjusted padding for mobile
    gap: 2rem;
    min-height: auto; // Remove fixed height on mobile
    
    .thumbnail {
      flex: none;
      
      img {
        width: 100%;
        max-width: 400px;
        height: 220px; // Slightly taller for mobile
      }
    }
    
    .body {
      min-height: auto; // Remove fixed height on mobile
      
      .listing-title {
        font-size: 1.5rem; // Smaller title on mobile
      }
      
      .listing-description {
        font-size: 1rem; // Smaller description on mobile
      }
    }
  }
  
  .container {
    padding: 0 1rem;
  }
}

// Tablet adjustments (768px - 1024px)
@media (min-width: 769px) and (max-width: 1024px) {
  #listing-research-posts .quarto-post {
    gap: 1.5rem;
    padding: 2rem;
    
    .thumbnail {
      flex: 0 0 45%; // Slightly smaller on tablet
      
      img {
        height: 200px;
      }
    }
    
    .body {
      .listing-title {
        font-size: 1.5rem;
      }
      
      .listing-description {
        font-size: 1rem;
      }
    }
  }
}

#listing-research-posts .quarto-post:hover {
  transform: translateY(-4px); // More prominent lift effect
  box-shadow: 0 12px 35px rgba(0,0,0,0.15); // Enhanced shadow on hover
}

#listing-research-posts .quarto-post:last-child {
  margin-bottom: 0;
}

// Remove old conflicting image styles - now handled above

#listing-research-posts .quarto-post .thumbnail img:hover {
  transform: scale(1.03); // Slightly more zoom for paper figures
}

// Style titles - PROMINENT IN HORIZONTAL LAYOUT
#listing-research-posts .quarto-post .listing-title {
  font-size: 1.6rem; // Large, prominent title
  font-weight: 600;
  line-height: 1.3; // Balanced line height
  margin-bottom: 0.75rem; // Good spacing
  margin-top: 0; // No top margin needed in horizontal layout
}

#listing-research-posts .quarto-post .listing-title a {
  color: #0d6efd;
  text-decoration: none;
  transition: color 0.2s ease;
}

#listing-research-posts .quarto-post .listing-title a:hover {
  color: #0a58ca;
}

// Style metadata - PROMINENT BUT NOT OVERWHELMING
#listing-research-posts .quarto-post .listing-date {
  font-size: 0.95rem; // Good readable size
  color: #6c757d;
  margin-bottom: 0.75rem; // Good spacing
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

#listing-research-posts .quarto-post .listing-date::before {
  content: "ðŸ“…";
  margin-right: 0.25rem;
}

// Style descriptions - READABLE AND PROMINENT
#listing-research-posts .quarto-post .listing-description {
  color: #495057;
  font-size: 1.1rem; // Good readable size
  line-height: 1.5; // Comfortable reading
  margin-bottom: 1rem; // Good spacing
}

// Style the injected links - SMALL ONE LINE DISPLAY
#listing-research-posts .listing-links {
  display: flex !important;
  flex-wrap: nowrap; // Keep in one line
  gap: 0.35rem; // Small spacing
  margin-top: 1.5rem;
  padding-top: 1rem;
  border-top: 1px solid #e9ecef;
  visibility: visible !important;
  opacity: 1 !important;
  position: relative;
  z-index: 10;
  overflow-x: auto; // Allow scrolling if too many links
}

#listing-research-posts .listing-links .btn {
  font-size: 0.7rem; // Very small font
  padding: 0.25rem 0.5rem; // Much smaller padding
  border-radius: 4px; // Smaller radius
  text-decoration: none !important;
  transition: all 0.2s ease;
  display: inline-flex !important;
  align-items: center;
  gap: 0.25rem; // Smaller gap
  visibility: visible !important;
  opacity: 1 !important;
  position: relative;
  z-index: 10;
  border: 1px solid;
  background-color: white;
  white-space: nowrap; // Don't wrap text
  flex-shrink: 0; // Don't shrink
  min-height: 24px; // Smaller height
  line-height: 1;
}

#listing-research-posts .listing-links .btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  opacity: 1 !important;
  text-decoration: none !important;
}

#listing-research-posts .listing-links .btn-primary {
  font-weight: 600;
  background-color: #0d6efd !important;
  border-color: #0d6efd !important;
  color: white !important;
}

#listing-research-posts .listing-links .btn-primary:hover {
  background-color: #0b5ed7 !important;
  border-color: #0b5ed7 !important;
  color: white !important;
}

#listing-research-posts .listing-links .btn-outline-primary {
  border-color: #0d6efd !important;
  color: #0d6efd !important;
  background-color: white !important;
}

#listing-research-posts .listing-links .btn-outline-primary:hover {
  background-color: #0d6efd !important;
  color: white !important;
}

#listing-research-posts .listing-links .btn-outline-secondary {
  border-color: #6c757d !important;
  color: #6c757d !important;
  background-color: white !important;
}

#listing-research-posts .listing-links .btn-outline-secondary:hover {
  background-color: #6c757d !important;
  color: white !important;
}

#listing-research-posts .listing-links .btn-outline-success {
  border-color: #198754 !important;
  color: #198754 !important;
  background-color: white !important;
}

#listing-research-posts .listing-links .btn-outline-success:hover {
  background-color: #198754 !important;
  color: white !important;
}

#listing-research-posts .listing-links .btn-outline-info {
  border-color: #0dcaf0 !important;
  color: #0dcaf0 !important;
  background-color: white !important;
}

#listing-research-posts .listing-links .btn-outline-info:hover {
  background-color: #0dcaf0 !important;
  color: white !important;
}

// Research links styling (for individual research pages)
.research-links {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin: 1.5rem 0;
}

.research-links .btn {
  font-size: 0.875rem;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  text-decoration: none;
  transition: all 0.2s ease;
}

.research-links .btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

// Style the "View all" link
.view-all-link {
  text-align: center;
  margin-top: 1.5rem; // Reduce top margin
  padding-top: 1rem; // Reduce top padding
  border-top: 1px solid #e9ecef;
}

.view-all-link a {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
  font-weight: 600;
  font-size: 1.1rem;
  color: #0d6efd;
  transition: color 0.2s ease;
}

.view-all-link a:hover {
  color: #0a58ca;
}

// Break research section out of Trestles layout - FIXED VERSION
#recent-research {
  width: 100% !important; // Use available width, not viewport width
  margin-left: 0 !important; // No negative margins
  padding-left: 1rem !important; // Reasonable padding
  padding-right: 1rem !important;
  margin-top: 3rem !important; // Separate from bio section
  background: linear-gradient(to bottom, transparent, #f8f9fa 20%, #f8f9fa); // Subtle background transition
}

#recent-research h2 {
  max-width: none !important; // Don't constrain title
  margin: 0 0 2rem 0 !important; // Remove auto centering
  font-size: 2rem;
  font-weight: 600;
  color: #2c3e50;
}

// Research posts use available width without overflow
#listing-research-posts {
  max-width: none !important; // Use available space
  margin: 0 !important; // No centering that could cause issues
  width: 100% !important;
}

// Responsive adjustments
@media (max-width: 768px) {
  // Stack vertically on mobile
  #listing-research-posts .quarto-post {
    flex-direction: column !important; // Stack image and content
    gap: 1.5rem;
    padding: 1.5rem;
    margin-bottom: 2rem;
  }
  
  #listing-research-posts .quarto-post .thumbnail {
    flex: none; // Remove fixed width on mobile
    width: 100%;
  }
  
  #listing-research-posts .quarto-post .thumbnail img {
    width: 100%;
    height: 200px; // Smaller height on mobile
  }
  
  #listing-research-posts .quarto-post .listing-title {
    font-size: 1.3rem;
  }
  
  #listing-research-posts .listing-links {
    gap: 0.25rem;
  }
  
  #listing-research-posts .listing-links .btn, .research-links .btn {
    font-size: 0.8rem;
    padding: 0.4rem 0.8rem;
  }
  
  // Full width research section on mobile too
  #recent-research {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
}

// Hide automatic page title for custom layout pages
.page-title {
  display: none !important;
}

// Hide any h1 that appears before hero section
h1.title {
  display: none !important;
}
